{% extends 'base.html' %} {% block content %}

<div class="max-w-md mx-auto bg-white rounded-lg shadow-md p-8">
  <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Create an Account</h1>

  <form method="POST" class="space-y-6">
    {% csrf_token %} {% for field in form %}
    <div class="space-y-1">
      <label for="{{ field.id_for_label }}" class="text-sm font-medium text-gray-700"
        >{{ field.label }}</label
      >
      <div class="relative">
        {{ field }} {% if 'password' in field.name %}
        <button
          type="button"
          class="absolute inset-y-0 right-0 px-3 flex items-center text-gray-500"
          onclick="togglePasswordVisibility('{{ field.id_for_label }}')"
        >
          <i data-lucide="eye" class="h-5 w-5"></i>
        </button>
        {% endif %}
      </div>
      {% if field.help_text %}
      <p class="text-xs text-gray-500">{{ field.help_text|safe }}</p>
      {% endif %} {% for error in field.errors %}
      <p class="text-xs text-red-600">{{ error }}</p>
      {% endfor %}
    </div>
    {% endfor %}
    <button
      type="submit"
      class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500"
    >
      Register
    </button>
  </form>

  {% if messages %}
  <div class="mt-6">
    {% for message in messages %}
    <div
      class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"
      role="alert"
    >
      <span class="block sm:inline">{{ message }}</span>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <div class="mt-6 text-center">
    <p class="text-gray-600">
      Already have an account?
      <a href="{% url 'store:login' %}" class="text-gray-800 hover:underline">Login</a>
    </p>
  </div>
</div>

{% endblock content %} {% block scripts %}
<script>
  function togglePasswordVisibility(fieldId) {
    const passwordField = document.getElementById(fieldId);
    const icon = passwordField.nextElementSibling.querySelector("i");
    if (passwordField.type === "password") {
      passwordField.type = "text";
      icon.setAttribute("data-lucide", "eye-off");
    } else {
      passwordField.type = "password";
      icon.setAttribute("data-lucide", "eye");
    }
    lucide.createIcons();
  }
</script>
{% endblock scripts %}
